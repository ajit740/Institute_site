{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
  /* Card Hover Effect */
  .course-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgb(0 0 0 / 0.05);
  }
  .course-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 10px 20px rgb(0 0 0 / 0.15);
  }

  /* Gradient Enroll Button */
  .btn-enroll {
    background: linear-gradient(45deg, #4CAF50, #81C784);
    border: none;
    font-weight: 600;
    transition: background 0.4s ease;
  }
  .btn-enroll:hover {
    background: linear-gradient(45deg, #388E3C, #66BB6A);
  }

  /* Course Badge Styles */
  .course-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    background: #ff5722;
    color: #fff;
    padding: 0.25rem 0.6rem;
    font-size: 0.75rem;
    font-weight: 700;
    border-radius: 0.25rem;
    text-transform: uppercase;
    box-shadow: 0 2px 5px rgb(0 0 0 / 0.15);
  }

  /* Modal Enhancements */
  .modal-content {
    border-radius: 12px;
  }
  .modal-header {
    background: #4caf50;
    color: white;
    border-bottom: none;
  }
  .modal-footer {
    border-top: none;
  }

  /* Course Title Typography */
  .card-title {
    font-weight: 700;
    font-size: 1.25rem;
    color: #2e7d32;
  }

  /* Course Description */
  .card-text {
    color: #555;
    flex-grow: 1;
  }

  /* Price Styling */
  .price-tag {
    font-size: 1.1rem;
    font-weight: 700;
    color: #388e3c;
    margin-top: 8px;
  }
</style>

<div class="container mt-4">

  <!-- Home Button -->
  <div class="mb-4">
    <a href="{% url 'home:index' %}" class="btn btn-outline-secondary">
      <i class="bi bi-house-door-fill"></i> Home
    </a>
  </div>

  <!-- AI Courses Section -->
  <h2 class="text-success mb-3">ðŸ¤– AI Courses</h2>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-5">

    <!-- AI Data Science Complete Program -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge">Popular</div>
        <img src="{% static 'images/ai_data_science.png' %}" class="card-img-top" alt="AI Data Science Complete Program">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">AI Data Science Complete Program</h5>
          <p class="card-text">Comprehensive AI and data science skills for beginners to advanced.</p>
          <p class="price-tag">â‚¹8,999</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="AI Data Science Complete Program" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Python Programming -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#2196f3;">Beginner</div>
        <img src="{% static 'images/python_programming.png' %}" class="card-img-top" alt="Python Programming">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Python Programming</h5>
          <p class="card-text">Learn Python basics and advanced programming techniques.</p>
          <p class="price-tag">â‚¹2,499</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Python Programming" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Data Analysis -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#fbc02d;">Intermediate</div>
        <img src="{% static 'images/data_analysis.jpg' %}" class="card-img-top" alt="Data Analysis">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Data Analysis</h5>
          <p class="card-text">Analyze data efficiently using Python libraries like Pandas & NumPy.</p>
          <p class="price-tag">â‚¹1,999</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Data Analysis" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Machine Learning -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#673ab7;">Advanced</div>
        <img src="{% static 'images/machine_learning.jpg' %}" class="card-img-top" alt="Machine Learning">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Machine Learning</h5>
          <p class="card-text">Master ML algorithms and build predictive models.</p>
          <p class="price-tag">â‚¹2,499</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Machine Learning" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Web Development Section -->
  <h2 class="text-primary mb-3">ðŸ’» Web Development</h2>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-5">

    <!-- Full Stack Web Development -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#4caf50;">Popular</div>
        <img src="{% static 'images/web_development.png' %}" class="card-img-top" alt="Full Stack Web Development">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Full Stack Web Development</h5>
          <p class="card-text">Build complete web apps using HTML, CSS, JS, React, Node.js & Django.</p>
          <p class="price-tag">â‚¹7,999</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Full Stack Web Development" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Frontend Development -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#03a9f4;">Intermediate</div>
        <img src="{% static 'images/front_end_development.png' %}" class="card-img-top" alt="Frontend Development">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Frontend Development</h5>
          <p class="card-text">Master UI/UX and modern JS frameworks like React and Bootstrap.</p>
          <p class="price-tag">â‚¹3,499</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Frontend Development" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Backend Development -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#009688;">Intermediate</div>
        <img src="{% static 'images/backend_dev.jpg' %}" class="card-img-top" alt="Backend Development">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Backend Development</h5>
          <p class="card-text">Learn backend logic with Django, Flask, Node.js & REST APIs.</p>
          <p class="price-tag">â‚¹3,999</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Backend Development" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

    <!-- Database & SQL -->
    <div class="col">
      <div class="card course-card h-100 shadow-sm position-relative">
        <div class="course-badge" style="background:#795548;">Beginner</div>
        <img src="{% static 'images/database.jpg' %}" class="card-img-top" alt="Database & SQL">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Database & SQL</h5>
          <p class="card-text">Learn relational databases, SQL queries, and database design fundamentals.</p>
          <p class="price-tag">â‚¹2,999</p>
          <button class="btn btn-enroll mt-auto enroll-btn" data-course="Database & SQL" data-bs-toggle="modal" data-bs-target="#enrollModal">Enroll Now</button>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Enroll Modal -->
<div class="modal fade" id="enrollModal" tabindex="-1" aria-labelledby="enrollModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form method="post" action="{% url 'courses:enroll_course' %}" class="modal-content needs-validation" novalidate>
      {% csrf_token %}
      <div class="modal-header">
        <h5 class="modal-title" id="enrollModalLabel">Enroll in Course</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" name="course_name" id="courseNameInput" value="">

        <div class="mb-3">
          <label for="studentName" class="form-label">Full Name *</label>
          <input type="text" class="form-control" id="studentName" name="student_name" required>
          <div class="invalid-feedback">Please enter your full name.</div>
        </div>

        <div class="mb-3">
          <label for="studentEmail" class="form-label">Email Address *</label>
          <input type="email" class="form-control" id="studentEmail" name="student_email" required>
          <div class="invalid-feedback">Please enter a valid email address.</div>
        </div>

        <div class="mb-3">
          <label for="studentPhone" class="form-label">Phone Number *</label>
          <input type="tel" class="form-control" id="studentPhone" name="student_phone" pattern="[0-9]{10}" required>
          <div class="invalid-feedback">Please enter a valid 10-digit phone number.</div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success">Submit Enrollment</button>
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
  // Set course name in modal
  document.querySelectorAll('.enroll-btn').forEach(button => {
    button.addEventListener('click', event => {
      const courseName = event.currentTarget.getAttribute('data-course');
      document.getElementById('courseNameInput').value = courseName;
      document.getElementById('enrollModalLabel').textContent = `Enroll in ${courseName}`;
      // Reset form validation state on modal open
      const form = document.querySelector('.needs-validation');
      form.classList.remove('was-validated');
      form.reset();
    });
  });

  // Bootstrap form validation
  (() => {
    'use strict'
    const forms = document.querySelectorAll('.needs-validation')
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  })();
</script>

{% endblock %}
